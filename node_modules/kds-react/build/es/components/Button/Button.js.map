{"version":3,"file":"Button.js","sources":["kds-react/src/components/Button/Button.js"],"sourcesContent":["import React, { Children } from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\nimport LoadingSpinner from '../LoadingSpinner/LoadingSpinner'\n\n/** We need to instantiate kinds and buttonTypes here and reference them in\n * proptypes for react-docgen to properly build props json output.\n */\nexport const kinds = [\n  'primary',\n  'primary-inverse',\n  'secondary',\n  'secondary-inverse',\n  'tertiary',\n  'tertiary-inverse',\n  'primary-positive',\n  'primary-positive-inverse',\n  'secondary-positive',\n  'tertiary-positive',\n  'primary-negative',\n  'primary-negative-inverse',\n  'secondary-negative',\n  'tertiary-negative',\n  'cancel'\n]\n\nconst kindModifiers = {\n  primary: 'primary',\n  'primary-inverse': 'primaryInverse',\n  secondary: 'secondary',\n  'secondary-inverse': 'secondaryInverse',\n  tertiary: 'tertiary',\n  'tertiary-inverse': 'tertiaryInverse',\n  'primary-positive': 'primaryPositive',\n  'primary-positive-inverse': 'primaryPositiveInverse',\n  'secondary-positive': 'secondaryPositive',\n  'tertiary-positive': 'tertiaryPositive',\n  'primary-negative': 'primaryNegative',\n  'primary-negative-inverse': 'primaryNegativeInverse',\n  'secondary-negative': 'secondaryNegative',\n  'tertiary-negative': 'tertiaryNegative',\n  cancel: 'cancel',\n\n  /* mapping old kinds for backwards compatibility */\n  destructive: 'primaryNegative',\n  'destructive-secondary': 'secondaryNegative',\n  favorable: 'primaryPositive',\n  'favorable-secondary': 'secondaryPositive'\n}\n\nconst ignoredChildren = [false, undefined, null, '']\n\nfunction getDataNameOfTheFirstChild (el) {\n  return (\n    typeof el.type === 'function' &&\n    el.type(el.props) &&\n    el.type(el.props).props &&\n    el.type(el.props).props['data-name']\n  )\n}\n\nfunction isKDSIcon (child) {\n  if (React.isValidElement(child)) {\n    return getDataNameOfTheFirstChild(child) === 'Icon'\n  }\n  return false\n}\n\nfunction getTruthyChildrenAsArray (children) {\n  return Children.toArray(children).filter(v => !ignoredChildren.includes(v))\n}\n\nfunction hasIconOnly (childrenArr) {\n  return childrenArr.length === 1 && isKDSIcon(childrenArr[0])\n}\n\nfunction hasLeadingIcon (childrenArr) {\n  return childrenArr.length > 1 && isKDSIcon(childrenArr[0])\n}\n\nfunction hasTrailingIcon (childrenArr) {\n  return (\n    childrenArr.length > 1 && isKDSIcon(childrenArr[childrenArr.length - 1])\n  )\n}\n\n/**\n * Buttons make common actions immediately visible and easy to perform with one click or tap.\n *\n * > **Note:** `<Button />` renders a button with all props spread on, like so: `<button {...props} />`.\n * So you can pass any relevant props such as: `disabled`, `onClick`, `name`, `value`, etc.\n */\nconst Button = (\n  { children, compact, kind, indeterminate, ...buttonProps },\n  ref\n) => {\n  const childrenArr = getTruthyChildrenAsArray(children)\n\n  const classes = cx(\n    'kds-Button',\n    `kds-Button--${kindModifiers[kind] ||\n      kindModifiers['primary']}` /* Default to 'primary' */,\n    {\n      'kds-Button--compact': compact,\n      'kds-Button--hasIconOnly': hasIconOnly(childrenArr),\n      'kds-Button--indeterminate': indeterminate\n    },\n    buttonProps.className\n  )\n\n  const renderChildren = () =>\n    React.Children.map(children, child =>\n      isKDSIcon(child)\n        ? React.cloneElement(child, {\n          size: compact ? 'utility-s' : 'utility-m',\n          className: cx(child.props.className, {\n            'kds-Button-icon': !hasIconOnly(childrenArr),\n            'kds-Button-icon--first': hasLeadingIcon(childrenArr),\n            'kds-Button-icon--last': hasTrailingIcon(childrenArr)\n          })\n        })\n        : child\n    )\n\n  const indeterminateProps = indeterminate\n    ? {\n      disabled: indeterminate,\n      role: 'progressbar',\n      'aria-valuetext': 'loading'\n    }\n    : {}\n\n  return (\n    <button\n      ref={ref}\n      {...indeterminateProps}\n      {...buttonProps}\n      className={classes}\n    >\n      {renderChildren()}\n      {indeterminate && (\n        <LoadingSpinner\n          size=\"xs\"\n          className={`kds-Button-LoadingSpinner kds-Button-LoadingSpinner--${kindModifiers[kind]}`}\n          label=\"\"\n        />\n      )}\n    </button>\n  )\n}\n\n// we do this because forwardRef render functions do not support propTypes or defaultProps.\nconst ButtonWithForwardRef = React.forwardRef(Button)\n\nButtonWithForwardRef.displayName = 'Button'\n\nButtonWithForwardRef.propTypes = {\n  /** Determines the button appearance based on connotations for various situations. */\n  kind: PropTypes.oneOf(kinds),\n  /** Compact button size. Used when space is limited. */\n  compact: PropTypes.bool,\n  /** Displays a loading spinner instead of button text. Used when button is in an indeterminate state. */\n  indeterminate: PropTypes.bool\n}\n\nButtonWithForwardRef.defaultProps = {\n  kind: 'primary',\n  compact: false,\n  indeterminate: false\n}\n\nexport default ButtonWithForwardRef\n"],"names":["kinds","kindModifiers","primary","secondary","tertiary","cancel","destructive","favorable","ignoredChildren","undefined","getDataNameOfTheFirstChild","el","type","props","isKDSIcon","child","React","isValidElement","getTruthyChildrenAsArray","children","Children","toArray","filter","v","includes","hasIconOnly","childrenArr","length","hasLeadingIcon","hasTrailingIcon","Button","ref","compact","kind","indeterminate","buttonProps","classes","cx","className","renderChildren","map","cloneElement","size","indeterminateProps","disabled","role","ButtonWithForwardRef","forwardRef","displayName","propTypes","PropTypes","oneOf","bool","defaultProps"],"mappings":"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"}