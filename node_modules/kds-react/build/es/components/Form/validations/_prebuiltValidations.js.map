{"version":3,"file":"_prebuiltValidations.js","sources":["kds-react/src/components/Form/validations/_prebuiltValidations.js"],"sourcesContent":["import { isTruthyOrZero } from '../../../utils/objectUtils'\nimport { isValidNonEmptyString } from '../../../utils/stringUtils'\n\nconst REQUIRED = 'required'\nconst PATTERN = 'pattern'\nconst MIN_LENGTH = 'minLength'\nconst MAX_LENGTH = 'maxLength'\nconst MIN = 'min'\nconst MAX = 'max'\n\n/**\n * Specify a field to be required\n * @param text Message to show if field is not filled\n * @returns Validation\n */\nexport const required = (text = '') => ({\n  _id: REQUIRED,\n  text: isValidNonEmptyString(text) ? text : 'Input is required.',\n  validate: isTruthyOrZero\n})\nrequired._id = REQUIRED\n\n/**\n * Specify a field to match a pattern\n * @param regex Regex to test test the field value against\n * @param text Message to show if field does not match the pattern\n * @returns Validation\n */\nexport const pattern = (regex = /.*/, text = '') => ({\n  _id: PATTERN,\n  text: isValidNonEmptyString(text) ? text : 'Input must be valid.',\n  validate: val => regex.test(val)\n})\npattern._id = PATTERN\n\n/**\n * Specify that a field's value must be a minimum allowed length\n * @param length The minimum length\n * @param text Message to show if field does not meet the length requirement\n * @returns Validation\n */\nexport const minLength = (length, text = '') => ({\n  _id: MIN_LENGTH,\n  text: isValidNonEmptyString(text)\n    ? text\n    : `Input must be ${length} characters or more.`,\n  validate: val =>\n    Boolean(val) && typeof val === 'string' && val.length >= length\n})\nminLength._id = MIN_LENGTH\n\n/**\n * Specify that a field's value has a maximum allowed length\n * @param length The minimum length\n * @param text Message to show if field does not meet the length requirement\n * @returns Validation\n */\nexport const maxLength = (length, text = '') => ({\n  _id: MAX_LENGTH,\n  text: isValidNonEmptyString(text)\n    ? text\n    : `Input must be ${length} characters or less.`,\n  validate: val =>\n    Boolean(val) && typeof val === 'string' && val.length <= length\n})\nmaxLength._id = MAX_LENGTH\n\n/**\n * Specify that a field's number value has a minimum allowed value\n * @param num The minimum value\n * @param text Message to show if field does not meet the value requirement\n * @returns Validation\n */\nexport const min = (num, text = '') => ({\n  _id: MIN,\n  text: isValidNonEmptyString(text) ? text : `Input must be ${num} or more.`,\n  validate: val => Number(val) >= num\n})\nmin._id = MIN\n\n/**\n * Specify that a field's number value has a maximum allowed value\n * @param num The maximum value\n * @param text Message to show if field does not meet the value requirement\n * @returns Validation\n */\nexport const max = (num, text = '') => ({\n  _id: MAX,\n  text: isValidNonEmptyString(text) ? text : `Input must be ${num} or less.`,\n  validate: val => Number(val) <= num\n})\nmax._id = MAX\n\nexport const contains = (validations, validation) =>\n  Boolean(validations.find(v => v._id === validation._id))\n\nexport const addRequiredToValidations = (\n  validations = [],\n  requiredMessage = ''\n) => {\n  // If 'required' prop is present, we want to add it to `validations` prop (if it doesn't have it already) instead of spreading it with props. This is because 'required` is a native HTML attribute and leads to native validation behavior, which is inconsistent with our validation messaging.\n\n  return !contains(validations, required)\n    ? [required(requiredMessage), ...validations]\n    : validations\n}\n"],"names":["REQUIRED","PATTERN","MIN_LENGTH","MAX_LENGTH","MIN","MAX","required","text","_id","isValidNonEmptyString","validate","isTruthyOrZero","pattern","regex","val","test","minLength","length","Boolean","maxLength","min","num","Number","max","contains","validations","validation","find","v","addRequiredToValidations","requiredMessage"],"mappings":"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"}