{"version":3,"file":"PhoneLink.js","sources":["kds-react/src/components/PhoneLink/PhoneLink.js"],"sourcesContent":["import cx from 'classnames'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport Link from '../Link/Link'\n\nexport const sizeOpts = ['inherit', 'l', 'm', 's', 'xs']\n\n// PhoneLink supports only US based numbers for now\nfunction parsePhoneNumber (str) {\n  const unimportantCharacters = /[^a-z\\d]/gi\n  const digits = String(str || '')\n    .replace(unimportantCharacters, '')\n    .toUpperCase()\n    .slice(0, 11)\n\n  return {\n    // Slice backwards in case of omitted prefixes\n    area: digits.slice(-10, -7),\n    exchange: digits.slice(-7, -4),\n    line: digits.slice(-4)\n  }\n}\n\nfunction urlifyNumber (num) {\n  const alphas = /[a-z]/gi\n  const prefix = num.area ? `+1(${num.area})` : ''\n\n  return `tel:${prefix}${num.exchange.replace(alphas, e161)}â€“${num.line.replace(\n    alphas,\n    e161\n  )}`\n}\n\nfunction e161 (char) {\n  switch (char.toLowerCase()) {\n    case 'a':\n    case 'b':\n    case 'c':\n      return 2\n    case 'd':\n    case 'e':\n    case 'f':\n      return 3\n    case 'g':\n    case 'h':\n    case 'i':\n      return 4\n    case 'j':\n    case 'k':\n    case 'l':\n      return 5\n    case 'm':\n    case 'n':\n    case 'o':\n      return 6\n    case 'p':\n    case 'q':\n    case 'r':\n    case 's':\n      return 7\n    case 't':\n    case 'u':\n    case 'v':\n      return 8\n    case 'w':\n    case 'x':\n    case 'y':\n    case 'z':\n      return 9\n\n    default:\n      return char\n  }\n}\n\nfunction formatNumber (num) {\n  const NUMDASH = '\\u2013' // \"EN dash\"\n  const prefix = num.area ? num.area + NUMDASH : ''\n\n  return `${prefix}${num.exchange}${NUMDASH}${num.line}`\n}\n\nfunction getAriaLabel (num) {\n  const parts = ['area', 'exchange', 'line']\n\n  const readoutFormat = parts\n    .map(part => num[part] && num[part].split('').join(' '))\n    .filter(_ => _)\n    .join('. ')\n    .concat('.')\n    .replace(/[a-z](?![.])/gi, match => (match ? `${match}.` : ''))\n\n  return readoutFormat\n}\n\n/**\n * PhoneLink is used to display phone numbers and provide native device behavior when clicked. See: [`PhoneLink` Design Guidelines](http://design.kroger.com/#/design/components/phonelink)\n */\n\nconst PhoneLink = ({\n  className,\n  implied /* destructured only to prevent from passing into Link, implied style not allowed on PhoneLink */,\n  dial,\n  ...props\n}) => {\n  const number = parsePhoneNumber(dial)\n  const displayNumber = formatNumber(number)\n  const href = urlifyNumber(number)\n  const ariaLabel = getAriaLabel(number)\n\n  return (\n    <Link\n      {...props}\n      className={cx('kds-PhoneLink', className)}\n      aria-label={ariaLabel}\n      href={href}\n      noRouter\n    >\n      {displayNumber}\n    </Link>\n  )\n}\n\nPhoneLink.propTypes = {\n  /** Optional classname */\n  className: PropTypes.string,\n  /** Phone number to dial */\n  dial: PropTypes.string.isRequired,\n  /** Explicit links have a black font color (or white, if inverse). */\n  explicit: PropTypes.string.bool,\n  /** Font size of the Link */\n  size: PropTypes.oneOf(sizeOpts)\n}\n\nPhoneLink.defaultProps = {\n  size: 'inherit',\n  explicit: false\n}\n\nexport default PhoneLink\n"],"names":["parsePhoneNumber","str","unimportantCharacters","digits","String","replace","toUpperCase","slice","area","exchange","line","urlifyNumber","num","alphas","prefix","e161","char","toLowerCase","formatNumber","NUMDASH","getAriaLabel","parts","readoutFormat","map","part","split","join","filter","_","concat","match","PhoneLink","className","implied","dial","props","number","displayNumber","href","ariaLabel","React","Link","cx","defaultProps","size","explicit"],"mappings":"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"}