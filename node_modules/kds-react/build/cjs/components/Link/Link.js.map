{"version":3,"file":"Link.js","sources":["kds-react/src/components/Link/Link.js"],"sourcesContent":["import cx from 'classnames'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { NavLink as RouterNavLink } from 'react-router-dom'\nimport { IconDownload, IconExternal } from '../Icon/index'\nimport { deprecationWarning } from '../../utils/deprecationWarning'\nimport { isKDSIcon } from '../../utils/iconUtils'\n\nexport const sizeOpts = ['inherit', 'l', 'm', 's', 'xs']\n\n/* Explicitly apply expected icon classes when link size is provided, instead of relying on Icon's size computation logic */\nconst inlineIconSizeMap = {\n  xs: 'kds-Icon--inlineExtraSmall',\n  s: 'kds-Icon--inlineSmall',\n  m: 'kds-Icon--inlineMedium',\n  l: 'kds-Icon--inlineLarge'\n}\n\nconst hasAbsoluteHref = href => /^[a-z][a-z\\d+.-]*:/.test(href)\n\n/**\n * On Kroger experiences, links are used as navigational elements. Only use them to take the User to another part of the experience, another site, or to download resources. See: [`Link` Design Guidelines](http://design.kroger.com/#/design/components/link)\n *\n * > ```Message { \"props\": { \"kind\": \"warning\" } }\n * > *THE FOLLOWING DEFAULT BEHAVIOR IS ON A DEPRECATION PATH.*\n * >\n * > By default, `<Link />` renders a [`react-router:NavLink`](https://reacttraining.com/react-router/web/api/NavLink) with all props spread on; so you can pass props such as: `activeClassName`, `activeStyle`, `exact`, `isActive`, etc. The `to` prop uses the `href` value; so just pass `href`.\n * > ```\n * >\n * > Esperanto developers should use [`kroger-seamless-navigation:SeamlessLink`](https://gitlab.kroger.com/fury-road/kroger-seamless-navigation#seamlesslink-replaces-link) instead, which is a component similar to `react-router:NavLink` that wraps `Link` and provides helpful routing and usage metrics tracking.\n * >\n * > The presence of some native anchor tag attributes will cause a standard `a` tag to be rendered. They are: `rel=\"external\"`, `download`, `href=\"mailto:\"`, `href=\"tel:\"`.\n */\n\nconst Link = ({\n  href,\n  implied,\n  explicit,\n  inverse,\n  noRouter,\n  withRouter,\n  size,\n  children,\n  ...aProps\n}) => {\n  const validSize = sizeOpts.includes(size)\n    ? size\n    : 'inherit' /* Prevent invalid classes from being applied, default to 'inherit' */\n  const classes = cx(\n    'kds-Link',\n    {\n      [`kds-Link--${validSize}`]:\n        size !==\n        'manual' /* Allow removal of size modifier class when needed (like for prominent links) */,\n      'kds-Link--implied': implied,\n      'kds-Link--explicit': explicit,\n      'kds-Link--inverse': inverse\n    },\n    aProps.className\n  )\n\n  if (typeof noRouter !== 'undefined') {\n    deprecationWarning(\n      `'noRouter' prop in kds-react Link is deprecated and will soon be removed. No action is required http://design.kroger.com/#/react/components/link`\n    )\n  }\n\n  if (!noRouter && typeof withRouter === 'undefined') {\n    deprecationWarning(\n      `kds-react Link default behavior is changing to render an 'a' tag by default. Use 'withRouter' prop to continue rendering a react-router NavLink http://design.kroger.com/#/react/components/link`\n    )\n  }\n\n  const isExternal = aProps.rel && aProps.rel.includes('external')\n  const isDownload = aProps.download\n  const isMailTo = href && /^mailto:/.test(href)\n  const isTel = href && /^tel:/.test(href)\n  const temporaryWithRouter = withRouter || typeof withRouter === 'undefined' // Temporarily allow withRouter to be truthy when undefined in order to detect what consumers are passing so we can properly alert them\n  const temporaryNoRouter = !withRouter && noRouter\n  const useRouter =\n    temporaryWithRouter &&\n    !isExternal &&\n    !isDownload &&\n    !isMailTo &&\n    !isTel &&\n    !temporaryNoRouter &&\n    !hasAbsoluteHref(href)\n\n  const Tag = useRouter ? RouterNavLink : 'a'\n  const routerNavLinkProps = {\n    isActive: () =>\n      !!aProps[\n        'aria-current'\n      ] /* required to set 'aria-current' for react-router-dom NavLink */\n  }\n  const newProps = {\n    ...(useRouter ? routerNavLinkProps : {}),\n    ...aProps,\n    ...{ [useRouter ? 'to' : 'href']: href }\n  }\n\n  const iconSizeClass = inlineIconSizeMap[size] || ''\n\n  const renderChildren = () =>\n    React.Children.map(children, child =>\n      isKDSIcon(child)\n        ? React.cloneElement(child, {\n          className: cx(child.props.className, iconSizeClass)\n        })\n        : child\n    )\n\n  return (\n    <Tag {...newProps} className={classes}>\n      {renderChildren()}\n      {isExternal && <IconExternal className={iconSizeClass} />}\n      {isDownload && <IconDownload className={iconSizeClass} />}\n    </Tag>\n  )\n}\n\nLink.propTypes = {\n  /** Implied links have a black font color (or white, if inverse) and no underline until hovered. */\n  implied: PropTypes.bool,\n  /** Explicit links have a black font color (or white, if inverse). */\n  explicit: PropTypes.bool,\n  /** Set to `true` if the link is placed on a dark background. */\n  inverse: PropTypes.bool,\n  /**\n   *\n   * ```Message { \"props\": { \"kind\": \"warning\", \"className\": \"mb-16\" } }\n   * **Deprecation:** This prop will be removed soon.\n   * ```\n   * Set to `true` if you don't want to render a React Router `NavLink`\n   * */\n  noRouter: PropTypes.bool,\n  /** Set to `true` if you want to render a React Router `NavLink` */\n  withRouter: PropTypes.bool,\n  size: PropTypes.oneOf(sizeOpts)\n}\n\nLink.defaultProps = {\n  href: '#',\n  implied: false,\n  explicit: false,\n  inverse: false,\n  // withRouter: false, /* Temporarily allow undefined until *noRouter* is removed */\n  size: 'inherit' // 'inherit' is a class that applies no size so that it can implicity 'inherit' the size of its parent\n}\n\nexport default React.memo(Link)\n"],"names":["sizeOpts","inlineIconSizeMap","xs","s","m","l","hasAbsoluteHref","href","test","Link","implied","explicit","inverse","noRouter","withRouter","size","children","aProps","validSize","includes","classes","cx","className","deprecationWarning","isExternal","rel","isDownload","download","isMailTo","isTel","temporaryWithRouter","temporaryNoRouter","useRouter","Tag","RouterNavLink","routerNavLinkProps","isActive","newProps","iconSizeClass","renderChildren","React","Children","map","child","isKDSIcon","cloneElement","props","IconExternal","IconDownload","defaultProps","memo"],"mappings":"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"}