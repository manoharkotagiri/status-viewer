import React from 'react'
import cx from 'classnames'
import { sizes, colors } from '../common/propOpts'

const OuterIconMock = ({
  children,
  className,
  color,
  size,
  name,
  ...props
}) => {
  return (
    <svg
      className={cx(
        `MOCK kds-Icon kds-${name}`,
        className,
        colors[color],
        sizes[size]
      )}
      {...props}
    >
      {children}
    </svg>
  )
}

const makeMockIcon = name => {
  function Icon (props) {
    return (
      <OuterIconMock data-name="Icon" name={name} {...props}>
        <path />
      </OuterIconMock>
    )
  }

  return Icon
}

const createMockSVG = iconsObj =>
  Object.keys(iconsObj).reduce(
    (obj, iconName) => ({
      ...obj,
      [iconName]: iconName.endsWith('Icons')
        ? createMockSVG(iconsObj[iconName])
        : makeMockIcon(iconName)
    }),
    {}
  )

module.exports = createMockSVG(jest.genMockFromModule('../index.js'))
