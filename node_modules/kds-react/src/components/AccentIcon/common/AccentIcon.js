import React from 'react'
import PropTypes from 'prop-types'
import cx from 'classnames'
import { sizes } from './propOpts'

/**
 * Accent Icons act as entry points to additional information or content. They add color and life to the interface while visually expressing our product offerings.
 *
 * Each `AccentIcon` is exported as a named component. e.g. `AccentIconAccount`, `AccentIconAddToList`, etc.
 * This allows you to import only the icons you'll use, which helps to keep bundle size low.
 *
 * Regarding loading behavior, we've made the decision to make "eager" loading opt-in while not allowing
 * developers to use the "auto" value. If you do not opt-in to "eager" loading, the
 * default behavior is loading="lazy"
 *
 * ! Caution: Although available in Chromium, the "auto" value is not mentioned in
 * ! the specification. Since it may be subject to change, we recommend not to
 * ! use it until it gets included.
 * ! From: https://web.dev/browser-level-image-lazy-loading/
 *
 * @link https://html.spec.whatwg.org/multipage/urls-and-fetching.html#lazy-loading-attributes
 */

export default class AccentIcon extends React.Component {
  static propTypes = {
    /** KDS designated sizes. */
    size: PropTypes.oneOf(['s', 'm', 'l', 'xl']),
    src: PropTypes.string.isRequired,
    alt: PropTypes.string,
    eager: PropTypes.bool
  }

  static defaultProps = {
    size: 's',
    eager: false
  }

  render () {
    const { className, size, alt, eager, ...props } = this.props
    /** Get correct class based on provided size prop. */
    const fontSizeClass = sizes[size]
    const classes = cx('kds-AccentIcon', fontSizeClass, className)

    return (
      <img
        className={classes}
        alt={alt ?? ''}
        loading={eager ? 'eager' : 'lazy'}
        {...props}
      />
    )
  }
}
