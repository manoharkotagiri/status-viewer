const { renderInSandbox } = require('../../../utils/funcTestUtils')
const assert = require('assert')

describe('<FormPassword /> functional tests', () => {
  const baseUrl = 'http://localhost:3000'
  const testBenchUrl = baseUrl + '/#/react/test-bench'
  beforeEach(() => {
    browser.url(testBenchUrl)
    $('.react-live.LiveProvider').waitForExist(
      5000,
      false,
      'test bench did not load'
    )
  })

  it('toggles input type onClick of icon-button', () => {
    const wrapper = renderInSandbox(`<FormPassword />`)
    const inputEl = wrapper.$('.kds-Input')

    assert.equal(inputEl.getAttribute('type'), 'password')

    wrapper.$('.kds-FormField-iconButton').click()

    assert.equal(inputEl.getAttribute('type'), 'text')
  })
})
