import React from 'react'
import Menu from './_Menu'
import Link from '../Link/Link'
import { render, fireEvent } from 'react-testing-library'

describe('<Menu />', () => {
  it('does not throw errors when children are not provided', () => {
    const { container } = render(<Menu />)

    expect(container).toBeDefined()
  })

  it('calls onChildClick prop passed to Menu and onClick prop passed to child', () => {
    const firstLinkText = 'first link text'
    const secondLinkText = 'second link text'
    const childClickHandler = jest.fn()
    const clickHandler = jest.fn()
    const menuWithChildren = (
      <Menu onChildClick={childClickHandler}>
        <Link onClick={clickHandler}>{firstLinkText}</Link>
        <Link>{secondLinkText}</Link>
      </Menu>
    )
    const { getByText } = render(menuWithChildren)

    fireEvent.click(getByText(firstLinkText))

    expect(childClickHandler).toBeCalled()
    expect(clickHandler).toBeCalled()

    expect(getByText(secondLinkText)).toBeInTheDocument()
  })
})
