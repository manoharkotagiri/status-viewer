import { generateData } from './SchemaForBreadcrumbs'

describe('generateData', () => {
  it('does not throw errors when it does not receive data', () => {
    const structuredData = generateData()
    expect(structuredData).toBeDefined()
  })

  it('builds correct structured data when only home is passed', () => {
    const breadcrumbs = [{ title: 'Home', url: '/' }]
    const structuredData = generateData(breadcrumbs)
    const expectedData = {
      '@context': 'https://schema.org',
      '@type': 'BreadcrumbList',
      itemListElement: [
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com',
          name: 'Home',
          position: 1
        }
      ]
    }
    expect(structuredData).toEqual(expectedData)
  })

  it('builds correct structured data when a department is passed', () => {
    const breadcrumbs = [
      { title: 'Home', url: '/' },
      { title: 'Baby', url: '/pl/baby/10' }
    ]
    const structuredData = generateData(breadcrumbs)
    const expectedData = {
      '@context': 'https://schema.org',
      '@type': 'BreadcrumbList',
      itemListElement: [
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com',
          name: 'Home',
          position: 1
        },
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com/pl/baby/10',
          name: 'Baby',
          position: 2
        }
      ]
    }
    expect(structuredData).toEqual(expectedData)
  })

  it('builds correct structured data when a category is passed', () => {
    const breadcrumbs = [
      { title: 'Home', url: '/' },
      { title: 'Baby', url: '/pl/baby/10' },
      {
        title: 'Baby & Toddler Food, Snacks & Beverages',
        url: '/pl/baby-toddler-food-snacks-beverages/10090'
      }
    ]
    const structuredData = generateData(breadcrumbs)
    const expectedData = {
      '@context': 'https://schema.org',
      '@type': 'BreadcrumbList',
      itemListElement: [
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com',
          name: 'Home',
          position: 1
        },
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com/pl/baby/10',
          name: 'Baby',
          position: 2
        },
        {
          '@type': 'ListItem',
          item:
            'https://www.kroger.com/pl/baby-toddler-food-snacks-beverages/10090',
          name: 'Baby & Toddler Food, Snacks & Beverages',
          position: 3
        }
      ]
    }
    expect(structuredData).toEqual(expectedData)
  })

  it('builds correct structured data when a subcategory is passed', () => {
    const breadcrumbs = [
      { title: 'Home', url: '/' },
      { title: 'Baby', url: '/pl/baby/10' },
      {
        title: 'Baby & Toddler Food, Snacks & Beverages',
        url: '/pl/baby-toddler-food-snacks-beverages/10090'
      },
      {
        title: 'Baby Food Pouches',
        url: '/pl/baby-food-pouches/1009000772'
      }
    ]
    const structuredData = generateData(breadcrumbs)
    const expectedData = {
      '@context': 'https://schema.org',
      '@type': 'BreadcrumbList',
      itemListElement: [
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com',
          name: 'Home',
          position: 1
        },
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com/pl/baby/10',
          name: 'Baby',
          position: 2
        },
        {
          '@type': 'ListItem',
          item:
            'https://www.kroger.com/pl/baby-toddler-food-snacks-beverages/10090',
          name: 'Baby & Toddler Food, Snacks & Beverages',
          position: 3
        },
        {
          '@type': 'ListItem',
          item: 'https://www.kroger.com/pl/baby-food-pouches/1009000772',
          name: 'Baby Food Pouches',
          position: 4
        }
      ]
    }
    expect(structuredData).toEqual(expectedData)
  })
})
