import React from 'react'
import { render } from 'react-testing-library'
import { getPermutationsAsArray } from '../../utils/generateComponents'
import Paragraph, { sizeOpts } from './Paragraph'
import { paragraphContract } from 'kds-web-e-commerce-theme'

describe('<Paragraph>', () => {
  it('adds custom className passed in as a prop', () => {
    const className = 'sichuan'
    const { container } = render(<Paragraph className={className} />)

    expect(container.firstChild).toHaveClass(className)
  })

  it('spreads attributes onto the rendered element', () => {
    const { container } = render(<Paragraph id="myParagraph" />)

    expect(container.firstChild).toHaveAttribute('id', 'myParagraph')
  })

  const AllPossibleParagraphStates = getPermutationsAsArray(Paragraph, {
    size: [...sizeOpts],
    children: ['Sample Paragraph Text']
  })

  describe('Renders all possible paragraph sizes and checks against contract test', () => {
    AllPossibleParagraphStates.forEach(({ jsx, props }) => {
      it(`with Props: ${JSON.stringify(props)}`, () => {
        const { container } = render(jsx)

        expect(container).toMatchSnapshot()
        expect(paragraphContract.validateHTML(container.innerHTML)).toBeTruthy()
      })
    })
  })
})
